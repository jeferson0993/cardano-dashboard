<!DOCTYPE html>
<html lang="pt-br">

<head>
    <title>Ada Cardano Dashboard</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <!--     Fonts and icons     -->
    <link rel="stylesheet" type="text/css"
        href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />
    <!-- Material Kit CSS -->
    <link href="assets/css/material-dashboard.css" rel="stylesheet" />
</head>

<body>
    <!-- Wrapper Start -->
    <div class="wrapper">
        <!-- Sidebar Start -->
        <div class="sidebar" data-color="azure" data-background-color="white">
            <div class="logo">
                <a href="/" class="simple-text logo-mini"><img id="logoImage" src="" alt=""><br />CARDANO DASHBOARD </a>
            </div>
            <div class="sidebar-wrapper">
                <ul class="nav">
                    <li id="dashboard-nav-item" class="nav-item active">
                        <a class="nav-link" dashboard href="#">
                            <i class="material-icons">dashboard</i>
                            <p>Dashboard</p>
                        </a>
                    </li>
                    <li id="about-nav-item" class="nav-item">
                        <a class="nav-link" about href="#">
                            <i class="material-icons">info_outline</i>
                            <p>Sobre</p>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- Sidebar End -->

        <!-- Main-Panel Start -->
        <div class="main-panel">
            <!-- Navbar Start -->
            <nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top">
                <div class="container-fluid">
                    <div class="navbar-wrapper">
                    </div>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navigation-index"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="navbar-toggler-icon icon-bar"></span>
                        <span class="navbar-toggler-icon icon-bar"></span>
                        <span class="navbar-toggler-icon icon-bar"></span>
                    </button>
                    <div class="collapse navbar-collapse justify-content-end">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" href="javascript:;">
                                    <i class="material-icons">notifications</i> Notificações
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <!-- Navbar End -->
            <div class="content">
                <div class="container-fluid">
                    <!-- Main Content Start -->

                    <!-- Dashboard Section Start -->
                    <section id="dashboard">
                        <div class="row">
                            <div class="col-lg-3 col-md-6 col-sm-6">
                                <div class="card card-stats">
                                    <div class="card-header card-header-info card-header-icon">
                                        <div class="card-icon">
                                            <i class="material-icons">paid</i>
                                        </div>
                                        <p class="card-category">Cotação atual</p>
                                        <h3 class="card-title">
                                            <small>R$ </small>
                                            <span id="current_price"></span>
                                        </h3>
                                    </div>
                                    <div class="card-footer">
                                        <div class="stats">
                                            <strong>Máximo: <span id="ath"></span></strong> - 
                                            <span id="ath_date"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6 col-sm-6">
                                <div class="card card-stats">
                                    <div class="card-header card-header-info card-header-icon">
                                        <div class="card-icon">
                                            <i class="material-icons">timeline</i>
                                        </div>
                                        <p class="card-category">Baixa / Alta</p>
                                        <h3 class="card-title"><span id="low_24h"></span>/<span id="high_24h"></span></h3>
                                    </div>
                                    <div class="card-footer">
                                        <div class="stats">
                                            <i class="material-icons">date_range</i> Ultimas 24 Horas
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6 col-sm-6">
                                <div class="card card-stats">
                                    <div class="card-header card-header-info card-header-icon">
                                        <div class="card-icon">
                                            <i class="material-icons">info_outline</i>
                                        </div>
                                        <p class="card-category">Fornecimento circulante</p>
                                        <h5 class="card-title" id="circulating_supply"></h5>
                                    </div>
                                    <div class="card-footer">
                                        <div class="stats">
                                            <strong>Total: </strong><span id="total_supply"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6 col-sm-6">
                                <div class="card card-stats">
                                    <div class="card-header card-header-info card-header-icon">
                                        <div class="card-icon">
                                            <i class="material-icons">account_balance</i>
                                        </div>
                                        <p class="card-category">Capitalização</p>
                                        <h5 id="market_cap" class="card-title"></h5>
                                    </div>
                                    <div class="card-footer">
                                        <div class="stats">
                                            <i class="material-icons">update</i> <span class="timestamp"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card card-chart">
                                    <div class="card-header card-header-info">
                                        <div class="ct-chart" id="priceChart"></div>
                                    </div>
                                    <div class="card-body">
                                        <h4 class="card-title">Cotação (BRL R$) - Ultimos 7 dias</h4>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="card card-chart">
                                    <div class="card-header card-header-info">
                                        <div class="ct-chart" id="marketCapChart"></div>
                                    </div>
                                    <div class="card-body">
                                        <h4 class="card-title">Capitalização (Bilhões R$) - Ultimos 7 dias</h4>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12" style="display: none;">
                                <div class="card card-chart">
                                    <div class="card-header card-header-info">
                                        <div class="ct-chart" id="completedTasksChart"></div>
                                    </div>
                                    <div class="card-body">
                                    <h4 class="card-title">Gráfico Semanal</h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12 col-md-12">
                                <div class="card">
                                    <div class="card-header card-header-tabs card-header-info">
                                        <div class="nav-tabs-navigation">
                                            <div class="nav-tabs-wrapper">
                                                <ul class="nav nav-tabs" data-tabs="tabs">
                                                    <li class="nav-item" top5>
                                                        <a class="nav-link active" href="#top5" data-toggle="tab">
                                                            Top 5 Criptomoedas
                                                            <div class="ripple-container"></div>
                                                        </a>
                                                    </li>
                                                    <li class="nav-item" rank1>
                                                        <a class="nav-link" href="#rank1" data-toggle="tab">
                                                            <span class="rank1"></span>
                                                            <div class="ripple-container"></div>
                                                        </a>
                                                    </li>
                                                    <li class="nav-item" rank2>
                                                        <a class="nav-link" href="#rank2" data-toggle="tab">
                                                            <span class="rank2"></span>
                                                            <div class="ripple-container"></div>
                                                        </a>
                                                    </li>
                                                    <li class="nav-item" rank3>
                                                        <a class="nav-link" href="#rank3" data-toggle="tab">
                                                            <span class="rank3"></span>
                                                            <div class="ripple-container"></div>
                                                        </a>
                                                    </li>
                                                    <li class="nav-item" rank4>
                                                        <a class="nav-link" href="#rank4" data-toggle="tab">
                                                            <span class="rank4"></span>
                                                            <div class="ripple-container"></div>
                                                        </a>
                                                    </li>
                                                    <li class="nav-item" rank5>
                                                        <a class="nav-link" href="#rank5" data-toggle="tab">
                                                            <span class="rank5"></span>
                                                            <div class="ripple-container"></div>
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div class="tab-content">
                                            <div class="tab-pane active" id="top5">
                                                <div class="card">
                                                    <div class="card-body table-responsive">
                                                        <table class="table table-hover">
                                                            <thead class="text-warning">
                                                                <th>ID</th>
                                                                <th>Nome</th>
                                                                <th>Cotação</th>
                                                                <th>Captalização</th>
                                                            </thead>
                                                            <tbody id="tbody">
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane" id="rank1">
                                                <h4 class="text-warning rank1"></h4>
                                                <p class="text-warning" id="rank1_desc"></p>
                                            </div>
                                            <div class="tab-pane" id="rank2">
                                                <h4 class="text-info rank2"></h4>
                                                <p class="text-info" id="rank2_desc"></p>
                                            </div>
                                            <div class="tab-pane" id="rank3">
                                                <h4 class="text-primary rank3"></h4>
                                                <p class="text-primary" id="rank3_desc"></p>
                                            </div>
                                            <div class="tab-pane" id="rank4">
                                                <h4 class="text-success rank4"></h4>
                                                <p class="text-success" id="rank4_desc"></p>
                                            </div>
                                            <div class="tab-pane" id="rank5">
                                                <h4 class="text-danger rank5"></h4>
                                                <p class="text-danger" id="rank5_desc"></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    <!-- Dashboard Section End -->

                    <!-- About Section Start -->
                    <section id="about">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="card">
                                    <div class="card-header card-header-info">
                                        <h4 class="card-title">Cardano dashboard</h4>
                                        <p class="card-category">por Jeferson Ferreira</p>
                                    </div>
                                    <div class="card-body">
                                        <div id="typography">
                                            <div class="card-title">
                                                <h2>Sobre</h2>
                                            </div>
                                            <div class="row">
                                                <div class="tim-typo">
                                                    <h3>
                                                        <span id="name" class="tim-note"></span>
                                                    </h3>
                                                </div>
                                                <div class="tim-typo">
                                                    <span id="status_updates_0" class="tim-note"></span>
                                                </div>
                                                <div class="tim-typo">
                                                    <span id="status_updates_1" class="tim-note"></span>
                                                </div>
                                                <div class="tim-typo">
                                                    <span id="status_updates_2" class="tim-note"></span>
                                                </div>
                                                <div class="tim-typo">
                                                    <span id="status_updates_3" class="tim-note"></span>
                                                </div>
                                                <div class="tim-typo">
                                                    <span id="status_updates_4" class="tim-note"></span>
                                                </div>
                                                <div class="tim-typo">
                                                    <h4 id="development"></h4>
                                                </div>                                                
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card card-profile">
                                    <div class="card-avatar">
                                        <a href="javascript:;">
                                            <img class="img" src="./assets/img/faces/autor.jpeg" />
                                        </a>
                                    </div>
                                    <div class="card-body">
                                        <h6 class="card-category text-gray">WEB DEVELOPER</h6>
                                        <h4 class="card-title">Jeferson Ferreira</h4>
                                        <p class="card-description">
                                            Estudante universitário, programador, usuário de linux e autodidata.
                                        </p>
                                        <a href="https://linkedin.com/in/jeferson0993" class="btn btn-info btn-round">Linkedin</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    <!-- About Section End -->

                    <!-- Main Content End -->
                </div>
            </div>
            <footer class="footer">
                <div class="container-fluid">
                    <nav class="float-left">
                        <ul>
                            <li>
                                <a href="https://github.com/jeferson0993">
                                    Github
                                </a>
                            </li>
                            <li>
                                <a href="https://linkedin.com/in/jeferson0993">
                                    Linkedin
                                </a>
                            </li>
                        </ul>
                    </nav>
                    <div class="copyright float-right">
                        &copy;
                        <script>
                            document.write(new Date().getFullYear());
                        </script>
                        , feito com <span class="text-danger"><i class="material-icons">favorite</i></span> por
                        <a href="https://github.com/jeferson0993" target="_blank">Jeferson Ferreira</a>
                        para uma web melhor.
                    </div>
                    <!-- your footer here -->
                </div>
            </footer>
        </div>
        <!-- Main-Panel End -->
    </div>
    <!-- Wrapper End -->

<!--   Core JS Files   -->
<script src="./assets/js/core/jquery.min.js"></script>
<script src="./assets/js/core/popper.min.js"></script>
<script src="./assets/js/core/bootstrap-material-design.min.js"></script>
<script src="./assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>

<!-- Plugin for the momentJs  -->
<script src="./assets/js/plugins/moment.min.js"></script>
<!--  Plugin for Sweet Alert -->
<script src="./assets/js/plugins/sweetalert2.js"></script>
<!-- Forms Validations Plugin -->
<script src="./assets/js/plugins/jquery.validate.min.js"></script>
<!-- Plugin for the Wizard, full documentation here: https://github.com/VinceG/twitter-bootstrap-wizard -->
<script src="./assets/js/plugins/jquery.bootstrap-wizard.js"></script>
<!--  DataTables.net Plugin, full documentation here: https://datatables.net/  -->
<script src="./assets/js/plugins/jquery.dataTables.min.js"></script>
<!-- Plugin for Fileupload, full documentation here: http://www.jasny.net/bootstrap/javascript/#fileinput -->
<script src="./assets/js/plugins/jasny-bootstrap.min.js"></script>
<!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
<script src="./assets/js/plugins/nouislider.min.js"></script>
<!-- Include a polyfill for ES6 Promises (optional) for IE11, UC Browser and Android browser support SweetAlert -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/core-js/2.4.1/core.js"></script>
<!-- Library for adding dinamically elements -->
<script src="./assets/js/plugins/arrive.min.js"></script>
<!-- Chartist JS -->
<script src="./assets/js/plugins/chartist.min.js"></script>
<!--  Notifications Plugin    -->
<script src="./assets/js/plugins/bootstrap-notify.js"></script>
<!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
<script src="./assets/js/material-dashboard.js" type="text/javascript"></script>

<script>
    let formatter = new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' });
    function fetchApi() {
        fetch('https://api.coingecko.com/api/v3/coins/cardano')
        .then(response => response.json())
        .then(json => {
            let date = new Date(json.last_updated);            
            $('.timestamp').html(date.toLocaleString());
            date = new Date(json.market_data.ath_date.brl);
            $('#ath_date').html(date.toLocaleString());

            $('#current_price').html(json.market_data.current_price.brl);
            $('#ath').html(json.market_data.ath.brl);
            $('#high_24h').html(json.market_data.high_24h.brl);
            $('#low_24h').html(json.market_data.low_24h.brl);
            $('#circulating_supply').html(json.market_data.circulating_supply);
            $('#total_supply').html(json.market_data.total_supply);
            $('#market_cap').html(formatter.format(json.market_data.market_cap.brl));
            $('#logoImage').attr('src', json.image.small);

            $('#name').html(json.name);
            for (let index = 0; index < 5; index++) {
                $('#status_updates_'+index).html(`<h3>${json.status_updates[index].user_title}</h3><p>${json.status_updates[index].description}</p><small>${json.status_updates[index].user}</small>`);
            }

            $('#development').html(`<span class="tim-note">{ "forks": <span class="text-primary">${json.developer_data.forks}</span>, "stars": <span class="text-info">${json.developer_data.stars}</span>, "subscribers": <span class="text-warning">${json.developer_data.subscribers}</span>, "total_issues": <span class="text-danger">${json.developer_data.total_issues}</span>, "closed_issues": <span class="text-success">${json.developer_data.closed_issues}</span> }</span>`);

            // console.log(json);
        })
        .catch((error) => {
            md.showMyNotification('top', 'center', 'danger', 'There has been a problem with your fetch operation: ' + error.message);
            console.error('There has been a problem with your fetch operation: ' + error.message);
        });
        fetch('https://api.coingecko.com/api/v3/coins/markets?vs_currency=brl&order=market_cap_desc&per_page=6&page=1&sparkline=false&price_change_percentage=24')
        .then(response => response.json())
        .then(json => {
            let tbody_content = '';
            let rank = 0;
            for (let index = 0; index < 5; index++) {
                rank = index + 1;
                $('.rank'+rank).text(json[index].name);
                $('#rank'+rank+'_desc')
                .html('id: '+json[index].id+
                ' symbol: ('+json[index].symbol+')'+
                '<br />market_cap_rank: '+json[index].market_cap_rank+
                '<br />high_24h: '+formatter.format(json[index].high_24h)+
                '<br />low_24h: '+formatter.format(json[index].low_24h)+
                '<br />ath: '+formatter.format(json[index].ath)+' ath_date: '+json[index].ath_date+
                '<br />'+
                '<br />total_supply: '+json[index].total_supply+' circulating_supply: '+json[index].circulating_supply+
                '<br />');
                tbody_content += `
                    <tr>
                        <td>${json[index].market_cap_rank}</td>
                        <td>${json[index].name}</td>
                        <td>${formatter.format(json[index].current_price)}</td>
                        <td>${formatter.format(json[index].market_cap)}</td>
                    </tr>
                `;

            }
            $('#tbody').html(tbody_content);
            // console.log(json);
        })
        .catch((error) => {
            md.showMyNotification('top', 'center', 'danger', 'There has been a problem with your fetch operation: ' + error.message);
            console.error('There has been a problem with your fetch operation: ' + error.message);
        });
    }
    function showSection(section) {
        $('#dashboard').hide();
        $('#about').hide();
        $('#dashboard-nav-item').removeClass('active');
        $('#about-nav-item').removeClass('active');
        if (section !== 'about' && section !== 'dashboard') {
            section = 'dashboard';
        }
        $('#'+section).show();
        $('#'+section+'-nav-item').addClass('active');
    }
  $(document).ready(function() {
    $().ready(function() {
      $sidebar = $('.sidebar');

      $full_page = $('.full-page');

      $sidebar_responsive = $('body > .navbar-collapse');

      window_width = $(window).width();

      fixed_plugin_open = $('.sidebar .sidebar-wrapper .nav li.active a p').html();

      if (window_width > 767 && fixed_plugin_open == 'Dashboard') {
        if ($('.fixed-plugin .dropdown').hasClass('show-dropdown')) {
          $('.fixed-plugin .dropdown').addClass('open');
        }

      }

      $('.fixed-plugin a').click(function(event) {
        // Alex if we click on switch, stop propagation of the event, so the dropdown will not be hide, otherwise we set the  section active
        if ($(this).hasClass('switch-trigger')) {
          if (event.stopPropagation) {
            event.stopPropagation();
          } else if (window.event) {
            window.event.cancelBubble = true;
          }
        }
      });

      $('.fixed-plugin .active-color span').click(function() {

        $(this).siblings().removeClass('active');
        $(this).addClass('active');

        var new_color = $(this).data('color');

        if ($sidebar.length != 0) {
          $sidebar.attr('data-color', new_color);
        }

        if ($full_page.length != 0) {
          $full_page.attr('filter-color', new_color);
        }

        if ($sidebar_responsive.length != 0) {
          $sidebar_responsive.attr('data-color', new_color);
        }
      });

      $('.fixed-plugin .background-color .badge').click(function() {
        $(this).siblings().removeClass('active');
        $(this).addClass('active');

        var new_color = $(this).data('background-color');

        if ($sidebar.length != 0) {
          $sidebar.attr('data-background-color', new_color);
        }
      });

      $('.fixed-plugin .img-holder').click(function() {
        $full_page_background = $('.full-page-background');

        $(this).parent('li').siblings().removeClass('active');
        $(this).parent('li').addClass('active');

      });

      $('.switch-sidebar-mini input').change(function() {
        $body = $('body');

        $input = $(this);

        if (md.misc.sidebar_mini_active == true) {
          $('body').removeClass('sidebar-mini');
          md.misc.sidebar_mini_active = false;

          $('.sidebar .sidebar-wrapper, .main-panel').perfectScrollbar();

        } else {

          $('.sidebar .sidebar-wrapper, .main-panel').perfectScrollbar('destroy');

          setTimeout(function() {
            $('body').addClass('sidebar-mini');

            md.misc.sidebar_mini_active = true;
          }, 300);
        }

        // we simulate the window Resize so the charts will get updated in realtime.
        var simulateWindowResize = setInterval(function() {
          window.dispatchEvent(new Event('resize'));
        }, 180);

        // we stop the simulation of Window Resize after the animations are completed
        setTimeout(function() {
          clearInterval(simulateWindowResize);
        }, 1000);

      });
    });
  });
</script>
<script>
  $(document).ready(function() {
    md.initDashboardPageCharts();
    showSection('dashboard');
    fetchApi();
  });
</script>
</body>

</html>